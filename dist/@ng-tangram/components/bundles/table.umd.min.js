!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("@angular/cdk/coercion"),require("@angular/cdk/collections"),require("rxjs/observable/defer"),require("rxjs/observable/merge"),require("rxjs/operators"),require("rxjs/Subject"),require("@angular/common")):"function"==typeof define&&define.amd?define(["exports","@angular/core","@angular/cdk/coercion","@angular/cdk/collections","rxjs/observable/defer","rxjs/observable/merge","rxjs/operators","rxjs/Subject","@angular/common"],t):t((e.nt=e.nt||{},e.nt.components=e.nt.components||{},e.nt.components.table={}),e.ng.core,e.ng.cdk.coercion,e.ng.cdk.collections,e.Rx.observable.defer,e.Rx.observable.merge,e.Rx.operators,e.Rx.Subject,e.ng.common)}(this,function(e,t,n,o,r,c,s,l,i){"use strict";var a=function(){return function(e,t,n){void 0===e&&(e=!1),this.isUserInput=e,this.column=t,this.sort=n}}(),u=new t.InjectionToken("nt-column"),p=new t.InjectionToken("nt-column-table"),h=function(){function e(e,t){this.elementRef=e,this.column=t}return e.decorators=[{type:t.Directive,args:[{selector:"nt-column-header",host:{class:"nt-column-header","[class.nt-column-sortable]":"column.sortable","[class.asc]":'column.sort === "asc"',"[class.desc]":'column.sort === "desc"',"(click)":"column.sorting(true)"}}]}],e.ctorParameters=function(){return[{type:t.ElementRef},{type:void 0,decorators:[{type:t.Optional},{type:t.Inject,args:[u]}]}]},e}(),d=function(){function e(){}return e.decorators=[{type:t.Directive,args:[{selector:"nt-column-cell",host:{class:"nt-column-cell"}}]}],e.ctorParameters=function(){return[]},e}(),m=function(){function e(e){this.template=e}return e.decorators=[{type:t.Directive,args:[{selector:"[ntColumnCellDef]"}]}],e.ctorParameters=function(){return[{type:t.TemplateRef}]},e}(),g=function(){function e(e,n,o){this._table=e,this._viewContainerRef=n,this._elementRef=o,this._sortable=!1,this.sort="",this.visibled=!0,this.width="auto",this.align="left",this.sortChange=new t.EventEmitter}return Object.defineProperty(e.prototype,"sortable",{get:function(){return this._sortable},set:function(e){this._sortable=n.coerceBooleanProperty(e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"text",{get:function(){return this.header&&this.header.elementRef.nativeElement.textContent},enumerable:!0,configurable:!0}),e.prototype.sorting=function(e){void 0===e&&(e=!1),this.sortable&&("asc"===this.sort?this.sort="desc":"desc"===this.sort?this.sort="":this.sort="asc",this.sortChange.emit(new a(e,this.name,this.sort)))},e.prototype.ngAfterContentInit=function(){},e.decorators=[{type:t.Component,args:[{selector:"nt-column",template:'\n    <ng-template>\n      <ng-content select="nt-column-header"></ng-content>\n    </ng-template>\n  ',providers:[{provide:u,useExisting:e}]}]}],e.ctorParameters=function(){return[{type:void 0,decorators:[{type:t.Optional},{type:t.Inject,args:[p]}]},{type:t.ViewContainerRef},{type:t.ElementRef}]},e.propDecorators={sortable:[{type:t.Input}],name:[{type:t.Input}],width:[{type:t.Input}],align:[{type:t.Input}],template:[{type:t.ViewChild,args:[t.TemplateRef]}],header:[{type:t.ContentChild,args:[h]}],cell:[{type:t.ContentChild,args:[m]}]},e}(),f=function(){function e(e,n,i){var a=this;this._ngZone=e,this._changeDetectorRef=n,this._element=i,this.columnComponent=g,this._selectionModel=new o.SelectionModel(!0,void 0,!1),this._multipleSortable=!1,this._selectable=!1,this._destroy=new l.Subject,this.selectedChange=new t.EventEmitter,this.sortChange=new t.EventEmitter,this.columSortChanges=r.defer(function(){return a._columns?c.merge.apply(void 0,a._columns.map(function(e){return e.sortChange})):a._ngZone.onStable.asObservable().pipe(s.take(1),s.switchMap(function(){return a.columSortChanges}))})}return Object.defineProperty(e.prototype,"columns",{get:function(){return this._columns?this._columns.toArray():[]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"selectable",{get:function(){return this._selectable},set:function(e){this._selectable=n.coerceBooleanProperty(e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isAllSelected",{get:function(){return this._selectionModel.selected.length===this.dataSource.length},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"selected",{get:function(){return this._selectionModel.selected},enumerable:!0,configurable:!0}),e.prototype.ngOnChanges=function(e){e&&e.dataSource&&!e.dataSource.firstChange&&this._selectionModel.clear()},e.prototype.ngAfterContentInit=function(){var e=this;this._columns.changes.pipe(s.startWith(null),s.takeUntil(this._destroy)).subscribe(function(){e._resetOptions(),e._changeDetectorRef.markForCheck()})},e.prototype.selectAll=function(){var e;this.isAllSelected?this._selectionModel.clear():(e=this._selectionModel).select.apply(e,this.dataSource),this.selectedChange.emit(this._selectionModel.selected)},e.prototype.select=function(e){this.checkSelected(e)?this._selectionModel.deselect(e):this._selectionModel.select(e),this.selectedChange.emit(this._selectionModel.selected)},e.prototype.checkSelected=function(e){return this._selectionModel.isSelected(e)},e.prototype._clearSort=function(e){this._columns.filter(function(t){return t.name!==(e?e.column:"")}).forEach(function(e){return e.sort=""})},e.prototype._resetOptions=function(){var e=this,t=c.merge(this._columns.changes,this._destroy);this.columSortChanges.pipe(s.takeUntil(t),s.filter(function(e){return e.isUserInput})).subscribe(function(t){e._multipleSortable||e._clearSort(t),e.sortChange.emit(t)}),c.merge.apply(void 0,this._columns.map(function(e){return e.sortChange})).pipe(s.takeUntil(t)).subscribe(function(){e._changeDetectorRef.markForCheck()})},e.prototype.ngOnDestroy=function(){this._destroy.next(),this._destroy.complete()},e.decorators=[{type:t.Component,args:[{selector:"nt-table",template:'<table [class]="class"> <thead> <tr> <th class="nt-selector-header" *ngIf="selectable"> <input type="checkbox" (click)="selectAll()" [checked]="isAllSelected"> </th> <th class="nt-column-h" *ngFor="let column of columns" [style.width]="column.width" [style.textAlign]="column.align" [class.hidden]="!column.visibled"> <ng-container *ngTemplateOutlet="column.template"></ng-container> </th> </tr> </thead> <tbody> <tr *ngFor="let data of dataSource"> <ng-container *ngTemplateOutlet="dataRow; context: {$implicit: data};"></ng-container> </tr> </tbody> </table> <ng-template #dataRow let-data> <td class="nt-selector-cell" *ngIf="selectable"> <input type="checkbox" (click)="select(data)" [checked]="checkSelected(data)"> </td> <td *ngFor="let column of columns" [style.textAlign]="column.align" [class.hidden]="!column.visibled"> <ng-container *ngTemplateOutlet="column.cell.template; context: {$implicit: data};"></ng-container> </td> </ng-template> ',encapsulation:t.ViewEncapsulation.None,providers:[{provide:p,useExisting:e}],host:{class:"nt-table"}}]}],e.ctorParameters=function(){return[{type:t.NgZone},{type:t.ChangeDetectorRef},{type:t.ElementRef}]},e.propDecorators={class:[{type:t.Input}],_columns:[{type:t.ContentChildren,args:[g]}],dataSource:[{type:t.Input}],selectable:[{type:t.Input}],selectedChange:[{type:t.Output}],sortChange:[{type:t.Output}]},e}(),b=function(){function e(){}return e.decorators=[{type:t.NgModule,args:[{imports:[i.CommonModule],exports:[i.CommonModule,f,g,d,h,m],declarations:[f,g,d,h,m]}]}],e.ctorParameters=function(){return[]},e}();e.NtTableModule=b,e.NtTableComponent=f,e.NtColumnSortChange=a,e.NT_COLUMN=u,e.NT_COLUMN_TABLE=p,e.NtColumnHeaderDirective=h,e.NtColumnCellDirective=d,e.NtColumnCellDefDirective=m,e.NtColumnComponent=g,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=table.umd.min.js.map
