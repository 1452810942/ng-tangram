!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@angular/core"),require("@angular/cdk/portal"),require("@angular/animations"),require("@ng-tangram/animate/fading"),require("@angular/cdk/keycodes"),require("rxjs/operators"),require("rxjs/Subject"),require("rxjs/Subscription"),require("@angular/cdk/overlay"),require("@angular/common")):"function"==typeof define&&define.amd?define(["exports","@angular/core","@angular/cdk/portal","@angular/animations","@ng-tangram/animate/fading","@angular/cdk/keycodes","rxjs/operators","rxjs/Subject","rxjs/Subscription","@angular/cdk/overlay","@angular/common"],e):e((t.nt=t.nt||{},t.nt.components=t.nt.components||{},t.nt.components.modal={}),t.ng.core,t.ng.cdk.portal,t.ng.animations,t.nt.animate.fading,t.ng.cdk.keycodes,t.Rx.operators,t.Rx.Subject,t.Rx.Subscription,t.ng.cdk.overlay,t.ng.common)}(this,function(t,e,n,o,a,r,i,s,c,l,p){"use strict";var u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};var d=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var a in e=arguments[n])Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t},f=function(){return function(){this.top="80px",this.maxWidth="80vw",this.closable=!0,this.data={},this.panelClass="tm-file-preview-modal-panel",this.hasBackdrop=!0,this.backdropClass="dark-backdrop",this.centerVertically=!1}}();function h(){throw Error("Attempting to attach modal content after content is already attached")}var m=function(t){function r(){var n=t.call(this)||this;return n.state="enter",n.animationStateChanged=new e.EventEmitter,n}return function(t,e){function n(){this.constructor=t}u(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(r,t),Object.defineProperty(r.prototype,"config",{get:function(){return this._config},set:function(t){this._config=t},enumerable:!0,configurable:!0}),r.prototype.attachComponentPortal=function(t){return this._portalOutlet.hasAttached()&&h(),this._portalOutlet.attachComponentPortal(t)},r.prototype.attachTemplatePortal=function(t){return this._portalOutlet.hasAttached()&&h(),this._portalOutlet.attachTemplatePortal(t)},r.prototype.onAnimationDone=function(t){this.animationStateChanged.emit(t)},r.prototype.onAnimationStart=function(t){this.animationStateChanged.emit(t)},r.prototype.exit=function(){this.state="exit"},r.decorators=[{type:e.Component,args:[{selector:"nt-modal",template:'\n    <ng-template cdkPortalOutlet></ng-template>\n    <button *ngIf="config.closable" (click)="exit()" class="close-button" type="button">\n      <span aria-hidden="true">&times;</span>\n    </button>\n  ',encapsulation:e.ViewEncapsulation.None,animations:[o.trigger("fade",[o.transition("void => *",a.fadeInY({a:"-10%",b:0},.2)),o.transition("* => exit",a.fadeOutY({a:0,b:"-10%"},.2))])],host:{class:"reveal","[@fade]":"state","(@fade.start)":"onAnimationStart($event)","(@fade.done)":"onAnimationDone($event)"}}]}],r.ctorParameters=function(){return[]},r.propDecorators={_portalOutlet:[{type:e.ViewChild,args:[n.CdkPortalOutlet]}]},r}(n.BasePortalOutlet),y=0,g=function(){function t(t,e,n,o){void 0===o&&(o="nt-modal-"+y++);var a=this;this._overlayRef=t,this._containerInstance=e,this.id=o,this.closable=this._containerInstance.config.closable,this._afterOpen=new s.Subject,this._afterClosed=new s.Subject,this._beforeClose=new s.Subject,this._locationChanges=c.Subscription.EMPTY,e.animationStateChanged.pipe(i.filter(function(t){return"done"===t.phaseName&&"enter"===t.toState}),i.take(1)).subscribe(function(){a._afterOpen.next(),a._afterOpen.complete()}),e.animationStateChanged.pipe(i.filter(function(t){return"done"===t.phaseName&&"exit"===t.toState}),i.take(1)).subscribe(function(){a._overlayRef.dispose(),a._locationChanges.unsubscribe(),a._afterClosed.next(a._result),a._afterClosed.complete(),a.componentInstance=null}),t.keydownEvents().pipe(i.filter(function(t){return t.keyCode===r.ESCAPE&&!!a.closable})).subscribe(function(){return a.close()}),n&&(this._locationChanges=n.subscribe(function(){return a.close()}))}return t.prototype.close=function(t){var e=this;this._result=t,this._containerInstance.animationStateChanged.pipe(i.filter(function(t){return"start"===t.phaseName}),i.take(1)).subscribe(function(){e._beforeClose.next(t),e._beforeClose.complete(),e._overlayRef.detachBackdrop()}),this._containerInstance.exit()},t.prototype.afterOpen=function(){return this._afterOpen.asObservable()},t.prototype.afterClosed=function(){return this._afterClosed.asObservable()},t.prototype.beforeClose=function(){return this._beforeClose.asObservable()},t.prototype.backdropClick=function(){return this._overlayRef.backdropClick()},t.prototype.keydownEvents=function(){return this._overlayRef.keydownEvents()},t.prototype.updateSize=function(t,e){return void 0===t&&(t="auto"),void 0===e&&(e="auto"),this._getPositionStrategy().width(t).height(e),this._overlayRef.updatePosition(),this},t.prototype._getPositionStrategy=function(){return this._overlayRef.getConfig().positionStrategy},t}(),_=new e.InjectionToken("nt-modal-data"),v=new e.InjectionToken("nt-model-default-config"),b=function(){function t(t,e,n,o,a,r,i){this._location=t,this._defaultConfig=e,this._overlay=n,this._injector=o,this._overlayContainer=a,this._componentFactoryResolver=r,this._applicationRef=i,this._openModalsAtThisLevel=[],this._afterAllClosedAtThisLevel=new s.Subject,this._afterOpenAtThisLevel=new s.Subject}return t.prototype.open=function(t,e){var n=this;void 0===e&&(e={}),e=d({},this._defaultConfig||new f,e);var o=this._createOverlay(e),a=this._attachModalContainer(o,e),r=this._attachModalContent(t,a,o,e);return this._openModalsAtThisLevel.push(r),r.afterClosed().subscribe(function(){return n._removeOpenModal(r)}),this._afterOpenAtThisLevel.next(r),r},t.prototype._createOverlay=function(t){var e=this._getOverlayConfig(t);return this._overlay.create(e)},t.prototype._attachModalContainer=function(t,e){var o=new n.ComponentPortal(m,null),a=t.attach(o);return a.instance.config=e,a.instance},t.prototype._attachModalContent=function(t,o,a,r){var i=new g(a,o,this._location,r.id);if(r.hasBackdrop&&a.backdropClick().subscribe(function(){i.close()}),t instanceof e.TemplateRef)o.attachTemplatePortal(new n.TemplatePortal(t,null,{$implicit:r.data,modalRef:i}));else{var s=this._createInjector(r,i,o),c=o.attachComponentPortal(new n.ComponentPortal(t,void 0,s));i.componentInstance=c.instance}return i},t.prototype._removeOpenModal=function(t){var e=this._openModalsAtThisLevel.indexOf(t);e>-1&&(this._openModalsAtThisLevel.splice(e,1),this._openModalsAtThisLevel.length||this._afterAllClosedAtThisLevel.next())},t.prototype._createInjector=function(t,e,o){var a=new WeakMap;return a.set(g,e),a.set(m,o),a.set(_,t.data),new n.PortalInjector(this._injector,a)},t.prototype._getOverlayConfig=function(t){var e=this._overlay.position().global().centerHorizontally();return new l.OverlayConfig({hasBackdrop:t.hasBackdrop,backdropClass:t.backdropClass,panelClass:t.panelClass,scrollStrategy:this._overlay.scrollStrategies.block(),minWidth:t.minWidth,minHeight:t.minHeight,maxWidth:t.maxWidth,maxHeight:t.maxHeight,positionStrategy:t.centerVertically?e.centerVertically():e.top(t.top)})},t.decorators=[{type:e.Injectable}],t.ctorParameters=function(){return[{type:p.Location,decorators:[{type:e.Optional}]},{type:f,decorators:[{type:e.Optional},{type:e.Inject,args:[v]}]},{type:l.Overlay},{type:e.Injector},{type:l.OverlayContainer},{type:e.ComponentFactoryResolver},{type:e.ApplicationRef}]},t}(),C=function(){function t(){}return t.decorators=[{type:e.Component,args:[{selector:"nt-modal-header",template:"<ng-content></ng-content>",host:{class:"nt-modal-header"}}]}],t.ctorParameters=function(){return[]},t}(),O=function(){function t(){}return t.decorators=[{type:e.Component,args:[{selector:"nt-modal-body",template:"<ng-content></ng-content>",host:{class:"nt-modal-body"}}]}],t.ctorParameters=function(){return[]},t}(),k=function(){function t(){}return t.decorators=[{type:e.Component,args:[{selector:"nt-modal-footer",template:"<ng-content></ng-content>",host:{class:"nt-modal-footer"}}]}],t.ctorParameters=function(){return[]},t}(),j=function(){function t(){}return t.decorators=[{type:e.NgModule,args:[{imports:[p.CommonModule,n.PortalModule,l.OverlayModule],entryComponents:[m],declarations:[m,C,O,k],providers:[b],exports:[C,O,k]}]}],t.ctorParameters=function(){return[]},t}();t.NtModalModule=j,t.NT_MODAL_DATA=_,t.NT_MODAL_DEFAULT_CONFIG=v,t.NtModal=b,t.NtModalRef=g,t.NtModalConfig=f,t.NtModalHeaderComponent=C,t.NtModalBodyComponent=O,t.NtModalFooterComponent=k,t.Éµa=m,Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=modal.umd.min.js.map
